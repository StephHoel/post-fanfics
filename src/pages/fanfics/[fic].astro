---
import BaseLayout from "../../layouts/BaseLayout.astro"
import { orderChapters } from "../../utils/order"
import { getFicStaticPaths } from "../../utils/getFicStaticPaths"
import { getFicName } from "../../utils/getFicName"

export const getStaticPaths = getFicStaticPaths

const { chapters, fic } = Astro.props

const capZero = chapters.find((chapter) => chapter.data.chapter === 0)
const ordered = orderChapters(chapters)

const title = getFicName(fic)
---

<BaseLayout title={title}>
  <div class="max-w-3xl mx-auto py-10">
    <a
      href="/post-fanfics/"
      class="text-blue-600 dark:text-blue-400 hover:underline">‚Üê Voltar</a
    >
    <h1 class="text-4xl font-bold mb-6 text-gray-900 dark:text-gray-100">
      {title}
    </h1>

    {
      capZero && capZero.data.chapterDetails?.synopsis && (
        <div class="mt-2 mb-6 space-y-2 text-justify">
          <h2>Sinope:</h2>
          <p>{capZero.data.chapterDetails?.synopsis}</p>
        </div>
      )
    }

    <ul class="space-y-4">
      {
        ordered.map((chapter) => (
          <li class="bg-white dark:bg-gray-800 p-4 rounded-xl shadow">
            <a
              href={`/post-fanfics/fanfics/${chapter.slug}`}
              class="text-lg font-medium text-blue-600 dark:text-blue-400 hover:underline"
            >
              {chapter.data.title}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</BaseLayout>
